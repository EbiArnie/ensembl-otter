#!/usr/local/bin/perl -Tw

# Author:        gr5
# Group:         anacode
# Maintainer:    gr5

use strict;
use warnings;

use SangerPaths qw{ core bioperl123 ensembl61 otter54 humpub };

use IO::Socket;

use Bio::Otter::ServerScriptSupport;
use Bio::Otter::Utils::MM;

{
    my $server = Bio::Otter::ServerScriptSupport->new;

    my $accs = $server->param('accessions');

    my $acc_list = [ split(/,/, $accs) ];


    my $types;
    eval {
        my $mm = Bio::Otter::Utils::MM->new;
        $types = $mm->get_accession_types($acc_list);
        1;
    } or $server->error_exit("Failed to fetch accession type info: $@");

    my $response = '';
    foreach my $acc (keys %$types) {
        $response .= join("\t", $acc, @{$types->{$acc}}) . "\n";
    }
    $server->send_response($response);
}


1;
