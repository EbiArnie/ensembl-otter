#!/usr/bin/perl -Tw

# Author:        jgrg
# Group:         anacode
# Maintainer:    jgrg

use strict;
use warnings;

BEGIN { use lib ($ENV{OTTER_PERL_INC} || q{}) =~ m{([^:]+)}g }
use SangerPaths qw{ core bioperl123 ensembl71 otter76 };

use Bio::Otter::ServerScriptSupport;
use Bio::Otter::ServerAction::Region;
use Bio::Vega::Transform::XML;

sub get_region {
    my ($server) = @_;

    my $region = Bio::Otter::ServerAction::Region->new_with_slice($server)->get_region;

    warn "Converting slice to XML...\n";

    my $formatter = Bio::Vega::Transform::XML->new;
    $formatter->region($region);

    my $xml = $formatter->generate_OtterXML;

    warn "Done converting slice to XML. Length of XML = " . length($xml) . "\n";

    return $xml;
}

Bio::Otter::ServerScriptSupport->send_response(\&get_region);

__END__

=head1 NAME - get_assembly_dna

=head1 AUTHOR

Ana Code B<email> anacode@sanger.ac.uk
